{
    "version": 3,
    "port": 8080,
    "extra_config": {
        "github_com/devopsfaith/krakend-swagger": {
            "fraction": 1,
            "refresh": "60s",
            "path": "/swagger.json",
            "description": "This is a sample server. You can find out more about at [http://blah](http://blah.blah.com)",
            "version": "1.0.0",
            "host": "my.api.com",
            "basePath": "/v1",
            "termsOfService": "http://url.to/tos",
            "contact-name": "The wonderful API department",
            "contact-email": "contact@example.com",
            "contact-url": "https://your.company/developers",
            "license-name": "MIT",
            "license-url": "https://opensource.org/licenses/MIT",
            "tags": [
                "B2B",
                "Restricted"
            ]
        }
    },
    "host": [
        "https://jsonplaceholder.typicode.com"
    ],
    "endpoints": [
        {
            "endpoint": "/orders",
            "method": "POST",
            "backend": [
                {
                    "url_pattern": "/market/order",
                    "extra_config": {
                        "validation/cel": [
                            {
                                "check_expr": "req_params.domain == 'g10'"
                            }
                        ]
                    }
                },
                {
                    "url_pattern": "/local/order",
                    "extra_config": {
                        "validation/cel": [
                            {
                                "check_expr": "req_params.domain == 'local'"
                            }
                        ]
                    }
                },
                {
                    "url_pattern": "/food/order",
                    "extra_config": {
                        "validation/cel": [
                            {
                                "check_expr": "req_params.domain == 'food'"
                            }
                        ]
                    }
                }
            ]
        },
        {
            "endpoint": "/posts",
            "method": "POST",
            "backend": [
                {
                    "url_pattern": "/posts"
                }
            ],
            "extra_config": {
                "validation/json-schema": {
                    "type": "object",
                    "properties": {
                        "firstName": {
                            "type": "string",
                            "description": "The person's first name."
                        },
                        "lastName": {
                            "type": "string",
                            "description": "The person's last name."
                        },
                        "age": {
                            "description": "Age in years which must be equal to or greater than zero.",
                            "type": "integer",
                            "minimum": 0
                        },
                        "title": {
                            "type": "string"
                        },
                        "body": {
                            "type": "string"
                        },
                        "extra": {
                            "type": "object",
                            "required": [
                                "iss",
                                "exp"
                            ],
                            "properties": {
                                "iss": {
                                    "type": "string"
                                },
                                "exp": {
                                    "type": "integer"
                                }
                            }
                        },
                        "userId": {
                            "type": "number"
                        }
                    }
                }
            }
        },
        {
            "endpoint": "/cel",
            "input_query_strings": [
                "foo"
            ],
            "backend": [
                {
                    "url_pattern": "/__debug/0",
                    "host": [
                      "http://localhost:8080"
                  ]
                },
                {
                    "url_pattern": "/__debug/1?ignore={resp0_message}",
                    "group": "sequence-1",
                    "host": [
                      "http://localhost:8080"
                  ],
                    "extra_config": {
                        "validation/cel": [
                            {
                                "check_expr": "has(req_params.Resp0_message)"
                            }
                        ]
                    }
                },
                {
                    "url_pattern": "/__debug/2",
                    "group": "sequence-2",
                    "host": [
                      "http://localhost:8080"
                  ],
                    "extra_config": {
                        "validation/cel": [
                            {
                                "check_expr": "resp_data.sequence-2.message == 'pong'"
                            }
                        ]
                    }
                },
                {
                    "url_pattern": "/__debug/3",
                    "group": "sequence-3",
                    "host": [
                      "http://localhost:8080"
                  ],
                    "extra_config": {
                        "validation/cel": [
                            {
                                "check_expr": "has(req_querystring.foo)"
                            }
                        ]
                    }
                },
                {
                    "url_pattern": "/__debug/4",
                    "group": "sequence-4",
                    "host": [
                      "http://localhost:8080"
                  ],
                    "extra_config": {
                        "validation/cel": [
                            {
                                "check_expr": "has(req_params.NEVER_CALLED_BACKEND)"
                            }
                        ]
                    }
                }
            ],
            "extra_config": {
                "proxy": {
                    "sequential": true
                }
            }
        }
    ]
}